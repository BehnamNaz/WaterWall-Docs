---
sidebar_position: 1
---

# Start

به صفحه اول و شروع آموزش استفاده از **واتروال** خوش آمدید!

## معرفی واتروال

**واتروال** یک هسته چند منظوره است که فقط به یک روش تونل خاص محدود نمی‌شود. این برنامه روش‌های متنوعی را ارائه می‌دهد که می‌توانید بر اساس نیازهای خود انتخاب و اجرا کنید.

### اهداف اصلی پروژه

1. **ایجاد تونل قدرتمند**: تمرکز اولیه پروژه بر توانایی اجرای یک تونل کارآمد و مطمئن بوده است.

2. **پیکربندی مستقیم**: پس از ایجاد تونل، هدف بعدی امکان ساخت پیکربندی مستقیم بوده است. با این قابلیت می‌توان فایروال ایران را بررسی کرد، یافته‌ها را اعمال نمود و از فیلتر شدن جلوگیری کرد. همچنین، **واتروال** با آخرین تغییرات فایروال ایران سازگار است.

## پیکربندی هسته

برای اجرای هسته **واتروال**، لازم است دو فایل JSON در کنار فایل اجرایی قرار دهید:

1. **core.json**: این فایل شامل تنظیماتی مانند لاگ‌ها و تعداد ترد‌ها است. می‌توانید مشخص کنید کدام لاگ‌ها را می‌خواهید مشاهده کنید و تا چه حد جزئیات را ببینید. به عنوان مثال، می‌توانید انتخاب کنید که آیا لاگ شبکه یا لاگ DNS را می‌خواهید یا خیر. همچنین، می‌توانید لاگ هر بخش را در فایل‌های جداگانه ذخیره کنید و حتی در کنسول نیز نمایش دهید.

   علاوه بر این، تعداد ترد‌های برنامه را می‌توانید در این فایل تنظیم کنید. اگر تنظیمی انجام ندهید، به صورت پیش‌فرض، تعداد ترد‌ها برابر با تعداد هسته‌های CPU سرور خواهد بود.

   برای مشاهده توضیحات کامل و مثال‌های مربوط به فایل core.json، به [این لینک](file-core.json) مراجعه کنید. در نهایت، فایل core.json را با تنظیمات دلخواه خود ایجاد کنید.

2. **config.json**: این فایل پیکربندی اصلی است که مشخص می‌کند چه تونلی باید اجرا شود و پروتکل مورد استفاده چیست. نام این فایل را می‌توانید در core.json تعیین کنید، بنابراین می‌توانید هر نامی که مایلید برای آن انتخاب کنید.

   برای ساخت این فایل، باید [این صفحه](file-config.json) را بخوانید. مثال‌های ارائه شده در صفحات مربوطه، روش‌های مختلف تونل را نشان می‌دهند و هر کدام با نام خود در منوی گیت‌هاب قابل مشاهده هستند.

   به طور خلاصه، در این فایل، پروتکلی که می‌خواهید اجرا شود را به صورت protocol stack توصیف می‌کنید. برنامه از این توصیف به عنوان دستورالعمل برای ساخت پروتکل استفاده می‌کند. این فرآیند تا حدودی شبیه به کدنویسی است و امکان ایجاد و اجرای بی‌نهایت شکل مختلف پروتکل را فراهم می‌کند. البته برای این کار، نیاز به اطلاعات عمومی در مورد شبکه و پروتکل‌ها است، اما لازم نیست شما درگیر این موضوعات شوید. برای تمام روش‌های مطرح و مورد نیاز، فایل‌ها و توضیحات لازم در ویکی ارائه خواهند شد.

## اجرای برنامه

برای اجرای عادی برنامه، دستور زیر را در ترمینال وارد کنید:

```sh
./Waterwall
```

برنامه پارامتر خاصی برای ورودی نمی‌گیرد، زیرا اطلاعات مورد نیاز را از فایل core.json به دست می‌آورد.

نکته: زمانی که برنامه را به این صورت اجرا می‌کنید، پس از بستن اتصال SSH، برنامه نیز بسته خواهد شد.

برای جلوگیری از این مشکل، روش‌های مختلف و ساده‌ای مانند tmux، nohup، screen، service و غیره وجود دارند. به عنوان مثال، می‌توانید از دستور زیر استفاده کنید تا برنامه در پس‌زمینه باقی بماند:

```bash
nohup ./Waterwall &
```