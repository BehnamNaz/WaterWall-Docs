---
sidebar_position: 2
---

# core.json توضیحات فایل

این فایل تنظیمات اولیه و کلی برنامه را توصیف می‌کند، مانند لاگ ها، فایل های مورد نیاز و سایر تنظیمات. فایل json باید در کنار waterwall قرار گیرد و می‌توانید تنظیمات داخل آن را به دلخواه تغییر دهید.

## ساختار کلی فایل core.json

```json
{
    "log": {
        "path": "log/",
        "core": {
            "loglevel": "DEBUG",
            "file": "core.log",
            "console": true
        },
        "network": {
            "loglevel": "DEBUG",
            "file": "network.log",
            "console": true
        },
        "dns": {
            "loglevel": "SILENT",
            "file": "dns.log",
            "console": false
        }
    },
    "dns": {},
    "misc": {
        "workers": 0,
        "ram-profile": "server",
        "libs-path": "libs/"
    },
    "configs": [
        "config_name.json"
    ]
}
```



### بخش log
 -   فیلد path به فولدری اشاره می‌کند که فایل های لاگ داخل آن قرار خواهند گرفت. در این مثال، یک پوشه به نام log در مسیر کنونی ساخته می‌شود و فایل های لاگ در آن قرار می‌گیرند.
 -   لاگ ها به سه بخش تقسیم شده‌اند: core (لاگ های هسته)، network (لاگ های شبکه) و dns (لاگ های DNS).
 -   پارامتر loglevel میزان جزئیات لاگ را مشخص می‌کند.
     - مقادیر ممکن عبارتند از: VERBOSE, DEBUG, INFO, WARN, ERROR, FATAL, SILENT (از بیشترین تا کمترین میزان لاگ).
 -   فیلد file نام فایلی است که لاگ های مربوطه در آن ذخیره می‌شوند.
 -   اگر می‌خواهید لاگ ها علاوه بر فایل در صفحه ssh نیز نمایش داده شوند، مقدار console را برابر true قرار دهید.

### بخش dns
- این بخش هنوز تکمیل نشده است و در آینده برای تنظیمات DNS (مانند adblock) استفاده خواهد شد.
- در حال حاضر، برنامه از تنظیمات DNS سیستم عامل پیروی می‌کند.

### بخش misc

- پارامتر workers تعداد ترد ها را مشخص می‌کند. اگر صفر باشد، به تعداد هسته های CPU ترد ساخته می‌شود. تعداد ترد ها می‌تواند بیشتر از تعداد هسته ها باشد، اما به صورت پیش‌فرض به تعداد هسته ها کافی است.
- یک ترد جداگانه برای کارهای سوکت، فایل و غیره ساخته می‌شود تا ترد های شبکه درگیر نشوند.
- پارامتر ram-profile میزان مصرف رم برنامه را کنترل می‌کند. گزینه های ممکن: minimal, client, server.
- در حالت server، به ازای هر ورکر حدود 40 مگابایت رم اشغال می‌شود، که مصرف CPU را کاهش می‌دهد.
- در حالت client، مصرف رم کمتر اما مصرف CPU کمی بیشتر است. این حالت برای استفاده کمتر افراد یا زمانی که رم کافی وجود ندارد مناسب است. بسته به تعداد ورکرها، بین 2 تا 10 مگابایت حداقل رم مصرف می‌شود.
- در حالت minimal، کمترین میزان ممکن رم مصرف می‌شود (حدود 250 کیلوبایت).
- مصرف رم بسته به میزان استفاده، کم و زیاد می‌شود و محدود به مقدار حداکثر خاصی نیست.
- پارامتر libs-path مسیر بارگذاری ماژول های خارج از هسته را مشخص می‌کند. تغییر این پارامتر تأثیر چندانی ندارد.

### بخش configs

- در این بخش، فایل های کانفیگ که قرار است توسط هسته اجرا شوند را وارد می‌کنید. می‌توانید بی‌نهایت فایل کانفیگ اجرا کنید.
- بهتر است فایل های کانفیگ جداگانه باشند تا سازماندهی بهتری داشته باشند. به عنوان مثال، اگر دو روش اجرا می‌کنید، بهتر است دو فایل جداگانه داشته باشید.